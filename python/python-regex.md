# 正则表达式
目录
- [知识点总结](#知识点总结)
    - [基本操作](#基本操作)
    - [常用方法](#常用方法)
    - [语法附录](#语法附录)
- [练习](#练习)
---
# 知识点总结

### 基本操作
> Python 中所有正则表达式的函数都在 re 模块中。

```python
# 导入模块
import re
# 创建规则对象:必须以字母或下划线开头，只包含字母、数字、下划线，长度大于4位，少于12位
nameRe = re.compile(r'[a-zA-z_]\w{3,11}')
names = ['_','user1','_user1','1user','user@1','username111','user-name']
for name in names:
    # 匹配规则
    if(nameRe.fullmatch(name)):
        print(f'用户名{name}合法')
    else:
        print(f'用户名{name}非法')
```
运行结果：
```sh
用户名 _ 非法
用户名 user1 合法
用户名 _user1 合法
用户名 1user 非法
用户名 user@1 非法
用户名 username111 合法
```
总结：
1. 导入模块
2. 创建规则对象
3. 使用规则进行匹配
4. `\w` 表示任意的字母、数字、下划线 
5. fullmatch() 方法是判断传入的文本是否能完全匹配规则
6. 经常用于判断相应的内容是否符合要求

### 常用方法

#### 查找符合规则的内容
```python
# 导入模块
import re
# 创建规则对象:IPv4合法地址
ipRe = re.compile(r'(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}')
# 需要搜索的文本内容
text='相关服务的地址是192.168.0.1、192.168.0.100和10.0.0.25'
# 用规则去匹配，返回所有符合规则的字符串列表
ips=ipRe.findall(text)
for i in ips:
    print(i)
```
运行结果：
```sh
192.168.0.1
192.168.0.100
10.0.0.25
```
- findall() 方法查找并返回符合规则的内容
- 经常用于在复杂的文本中，提取想要的信息
- 如果只想找到一个符合规则的信息，可以使用 search() 方法替代

#### 提取词语
```python
# 导入模块
import re
# 创建规则对象:长度至少为1的非单词字符(也就是除了字母、数字、下划线以外的其他字符)
ipRe = re.compile(r'\W+')
# 需要提取词语的文本（词语之间并不都是空格）
text='Are you a boy? No, I am a girl. I am 10 years old!'
# 使用规则匹配，分隔文本
ips=ipRe.split(text)
# 打印结果，是一个分隔后的列表
print(ips)
```
运行结果：
```sh
['Are', 'you', 'a', 'boy', 'No', 'I', 'am', 'a', 'girl', 'I', 'am', '10', 'years', 'old', '']
```
- 比字符串的 split() 方法适应更复杂的情况
- 常用于英文类似的单词处理（中文的词语比这个复杂，简单的字符串处理应付不了）

### 语法附录
- `.` (点) 在默认情况，匹配除了换行的任意字符。
- `^` (插入符号) 匹配字符串的开头。
- `$` (美元符号) 匹配字符串尾或者在字符串尾的换行符的前一个字符
- `*` (星号) 对它前面的正则式匹配0到任意次重复
- `+` (加号) 对它前面的正则式匹配1到任意次重复
- `?` (问号) 对它前面的正则式匹配0到1次重复(也就是前面的规则可选)
- `{m}` 对其之前的正则式指定匹配 m 个重复
- `{m,n}` 对其之前的正则式进行 m 到 n 次匹配
- `[]` (一对方框) 用于表示一个字符集合
    - 字符可以单独列出，比如 [amk] 匹配 'a'， 'm'， 或者 'k'。
    - 可以表示字符范围，通过用 '-' 将两个字符连起来。比如 [a-z] 将匹配任何小写ASCII字符， [0-5] 将匹配从 0 到 5 的数字
    - 特殊字符在集合中，失去它的特殊含义。比如 [(+*)] 只会匹配 `(` `+` `*` 这几个字符
- `|` (竖线) 表示或者，比如 `A|B` 表示匹配 A 或者 B 规则   
- `\d` 匹配十进制数，也就是 0~9 
- `\D` 匹配非十进制数，上面的取反
- `\w` 匹配词语的字符，包含了可以构成词语的绝大部分字符，也包括数字和下划线
- `\W` 匹配非词语的字符，上面的取反

# 练习
1. 基础练习（必做，个人完成）

    - 完成[基础练习-7](/python/lab/lab-7.md)





